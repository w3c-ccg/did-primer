<h1 id="did-primer-spring-2018">DID Primer Spring 2018</h1>
<p><em>This is a community document maintained by co-editors Drummond Reed and Manu Sporny and other contributors and implementers of the</em> <a href="https://w3c-ccg.github.io/did-spec/"><strong>Decentralized Identifier 1.0 specification</strong></a><em>.</em></p>
<h2 id="introduction">Introduction</h2>
<p>At a superficial level, a <strong>decentralized identifier</strong> (<strong>DID</strong>) is simply a new type of globally unique identifier with special features designed for blockchains. But at a deeper level, DIDs are the core component of an entirely new layer of decentralized digital identity and public key infrastructure (PKI) for the Internet. This <a href="https://github.com/WebOfTrustInfo/rebooting-the-web-of-trust/blob/master/final-documents/dpki.pdf"><em><strong>decentralized public key infrastructure</strong></em></a> (DPKI) could have as much impact on global cybersecurity and cyberprivacy as the development of the <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security"><em>SSL/TLS protocol</em></a> for encrypted Web traffic (now the largest PKI in the world).</p>
<p>This primer is designed to give newcomers to DID architecture the background they need to understand not just the DID specification, but the overall architecture for decentralized identity represented by the family of DID-related specifications currently under development. It covers:</p>
<ul>
<li><p>Background on the origin of DIDs and the DID specification.</p></li>
<li><p>How DIDs differ from other globally-unique identifiers.</p></li>
<li><p>How the syntax of DIDs can be adapted to work with any modern blockchain.</p></li>
<li><p>How DIDs resolve to <strong>DID documents</strong> containing public keys and service endpoints.</p></li>
<li><p>The key role that <strong>DID methods</strong> play in the implementation of DID infrastructure.</p></li>
<li><p>Privacy considerations for the use of DIDs.</p></li>
<li><p>How DID infrastructure lays the foundation for <strong>verifiable claims</strong>.</p></li>
</ul>
<h2 id="setting-the-stage-the-origin-of-dids">Setting the Stage: The Origin of DIDs</h2>
<p>In the history of the Internet, every identifier that is both globally unique and globally resolvable -- meaning you can look it up and obtain metadata about the resource it identifies -- has required some type of centralized administration. For example, both IP (Internet Protocol) addresses and DNS (Domain Name System) names -- the foundations for the Internet and the Web -- require centralized registries and registrars.</p>
<p>Although these centralized systems are very efficient, this architecture has long been recognized as both a single point of control (and thus potential censorship) and a single point of failure. So, in the last few years, several groups began independently investigating decentralized alternatives. In chronological order:</p>
<ol>
<li><p>The <a href="https://www.w3.org/Payments/WG/"><em>W3C Web Payments Working Group</em></a> and <a href="https://w3c.github.io/vctf/"><em>W3C Verifiable Claims Task Force</em></a>, led by Manu Sporny and David Longley of Digital Bazaar, recognized that truly portable digital credentials for individuals would require a new type of identifier that was not dependent on a third-party for registration or resolution.</p></li>
<li><p>The XDI.org Registry Working Group, led by <a href="https://www.oasis-open.org/committees/xdi/"><em>OASIS XDI Technical Committee</em></a> co-chairs Drummond Reed and Markus Sabadello and Internet Identity Workshop (IIW) co-founder Phil Windley, began looking for a decentralized solution for identifying participants in a global peer-to-peer XDI semantic data interchange network.</p></li>
<li><p>The <a href="http://www.weboftrust.info/"><em>Rebooting the Web of Trust</em></a> (RWOT) community, led by Christopher Allen, began exploring how blockchain technology could be used to enable the decentralized digital identity and trust network originally envisioned by <a href="https://en.wikipedia.org/wiki/Phil_Zimmermann"><em>Phil Zimmermann</em></a> for <a href="https://en.wikipedia.org/wiki/Pretty_Good_Privacy"><em>PGP</em></a>.</p></li>
<li><p><a href="https://www.dhs.gov/science-and-technology"><em>The U.S. Department of Homeland Security (DHS) Science &amp; Technology Directorate</em></a> (S&amp;T), led by Identity and Data Privacy Program Manager Anil John, began researching <a href="https://www.sbir.gov/sbirsearch/detail/867797"><em>how blockchain technology could be used for privacy-respecting decentralized identity management</em></a>.</p></li>
</ol>
<p>In the spring of 2016, all four groups converged on the concept of DIDs, a term originally coined by the W3C Verifiable Claims Task Force. Thanks in part to R&amp;D funding provided by DHS S&amp;T, work on the first <a href="https://w3c-ccg.github.io/did-spec/"><em>Decentralized Identifier 1.0 specification</em></a> began in earnest at RWOT #2 in May 2016. The draft spec underwent review at RWOT #3 and IIW #23 in October 2016, and was published as Implementer’s Draft 01 on 21 November 2016.</p>
<p>After the <a href="https://www.w3.org/2017/vc/charter.html"><em>W3C Verifiable Claims Working Group</em></a> was approved in March 2017, in July 2017 the DID specification was contributed to the W3C Credentials Community Group. Work on several related specifications (see below) is continuing at RWOT and IIW events held every six months, as well as other industry events and conferences. See Appendix A for a list of resources and ways to become involved in the DID family of specifications.</p>
<h2 id="how-dids-differ-from-other-globally-unique-identifiers">How DIDs Differ from Other Globally Unique Identifiers</h2>
<p>The need for globally unique identifiers that do not require a centralized registration authority is not new. <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier"><em>UUIDs</em></a> (Universally Unique Identifiers, also called GUIDs, Globally Unique Identifiers) were developed for this purpose in the 1980s and standardized first by the Open Software Foundation and then by <a href="https://tools.ietf.org/html/rfc4122"><em>IETF RFC 4122</em></a>.</p>
<p>The need for persistent identifiers (identifiers that can be assigned once to an entity and never need to change) is also not new. This class of identifiers was standardized as <a href="https://en.wikipedia.org/wiki/Uniform_Resource_Name"><em>URNs</em></a> (Uniform Resource Names) first by IETF <a href="https://www.ietf.org/rfc/rfc2141.txt"><em>RFC 2141</em></a> and more recently by <a href="https://tools.ietf.org/html/rfc8141"><em>RFC 8141</em></a>.</p>
<p>As a rule, however, UUIDs are not globally resolvable and URNs -- if resolvable -- require a centralized registration authority. In addition, neither UUIDs or URNs inherently address a third characteristic -- the ability to <strong>cryptographically verify ownership of the identifier</strong>.</p>
<p>For blockchain identity -- and more specifically <strong>self-sovereign identity</strong>, which can be defined as a lifetime portable digital identity that does not depend on any centralized authority -- we need a new class of identifier that fulfills all four requirements: persistence, global resolvability, cryptographic verifiability, and decentralization.</p>
<h2 id="the-format-of-a-did">The Format of a DID</h2>
<p>In 2016 the developers of the DID specification agreed with a suggestion from Christopher Allen that DIDs could be adapted to work with multiple blockchains by following the same basic pattern as the URN specification:</p>
<p><img src="../supporting-files/paper-images/did-primer-1.png" /></p>
<p>The key difference is that with DIDs the namespace component identifies a <strong>DID method</strong>, and a <strong>DID method specification</strong> specifies the format of the method-specific identifier.</p>
<p><img src="../supporting-files/paper-images/did-primer-2.png" /></p>
<p>DID methods (further explained below) define how DIDs work with a specific blockchain. All DID method specs must define the format and generation of the method-specific identifier. Note that the method specific identifier string <strong>must</strong> be unique in the namespace of that DID method. For example the DID above uses the Sovrin DID method in which the method-specific identifier is generated by base-56-encoding the first half of an Ed25519 verification key.</p>
<h2 id="did-documents">DID Documents</h2>
<p>DID infrastructure can be thought of as a global <a href="https://en.wikipedia.org/wiki/Key-value_database"><em>key-value database</em></a> in which the database is all DID-compatible blockchains, distributed ledgers, or decentralized networks. In this virtual database, the key is a DID, and the value is a <strong>DID document</strong>. The purpose of the DID document is to describe the public keys, authentication protocols, and service endpoints necessary to bootstrap cryptographically-verifiable interactions with the identified entity.</p>
<p>A DID document is a valid <a href="https://json-ld.org/spec/latest/json-ld/"><em>JSON-LD object</em></a> that uses the <strong>DID context</strong> (the RDF vocabulary of property names) defined in the DID specification. This includes six components (all optional):</p>
<ol>
<li><p><strong>The DID itself</strong>, so the DID document is fully self-describing.</p></li>
<li><p><strong>A set of public keys or other proofs</strong> that can be used for authentication or interaction with DID subject.</p></li>
<li><p><strong>A set of authentication protocols</strong> for authenticating the DID subject.</p></li>
<li><p><strong>A set of service endpoints</strong> that describe where and how to interact with the DID subject.</p></li>
<li><p><strong>Timestamps</strong> for auditing.</p></li>
<li><p><strong>A optional JSON-LD signature</strong> if needed to verify the integrity of the DID document.</p></li>
</ol>
<p>See the <a href="https://w3c-ccg.github.io/did-spec/"><em>DID specification</em></a> for several examples of DID documents.</p>
<h2 id="did-methods">DID Methods</h2>
<p>DIDs and DID documents can be adapted to any modern blockchain, distributed ledger, or other decentralized network capable of resolving a unique key into a unique value. It does not matter whether the blockchain is public, private, permissionless, or permissioned.</p>
<p>Defining how a DID and DID document are created, resolved, and managed on a specific blockchain or &quot;target system&quot; is the role of a <strong>DID method specification</strong>. DID method specifications are to the generic DID specification as URN namespace specifications (UUID, ISBN, OID, LSID, etc.) are to the generic IETF URN specification (<a href="https://tools.ietf.org/html/rfc8141"><em>RFC 8141</em></a>).</p>
<p>A DID method specification must define the following:</p>
<ol>
<li><p>The DID method name.</p></li>
<li><p>The ABNF structure of the method-specific identifier.</p></li>
<li><p>How the method-specific identifier is generated or derived.</p></li>
<li><p>How the <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete"><em>CRUD operations</em></a> are performed on a DID and DID document:</p>
<p>a. <strong>Creating</strong> a new DID.</p>
<p>b. <strong>Reading</strong> (resolving) a DID document.</p>
<p>c. <strong>Updating</strong> a DID document.</p>
<p>d. <strong>Deleting</strong> (revoking) a DID.</p></li>
</ol>
<p>It is these CRUD operations that may vary the most across different DID methods. For example:</p>
<ol>
<li><p><strong>Create.</strong> Some DID methods may generate a DID directly from a cryptographic key pair. Others may use the address of a transaction or a smart contract on the blockchain itself.</p></li>
<li><p><strong>Read.</strong> Some DID methods use blockchains that can store DID documents directly on the blockchain. Others may instruct DID resolvers to construct them dynamically based on attributes of a blockchain record. Still others may store a pointer on the blockchain to a DID document stored in one or more parts on other decentralized storage networks such as <a href="https://en.wikipedia.org/wiki/InterPlanetary_File_System"><em>IPFS</em></a> or <a href="https://en.wikipedia.org/wiki/STORJ"><em>STORJ</em></a>.</p></li>
<li><p><strong>Update.</strong> The update operation is the most critical from a security standpoint because control of a DID document represents control of the public keys or proofs necessary to authenticate an entity (and therefore for an attacker to impersonate the entity). Since verification of DID document update permissions can only be enforced by the target blockchain, the DID method specification must define precisely how authentication and authorization are performed for any update operation.</p></li>
<li><p><strong>Delete.</strong> DID entries on a blockchain are by definition immutable, so they can never be “deleted” in the conventional database sense. However they can be <strong>revoked</strong> in the cryptographic sense. A DID method specification must define how this termination is performed, e.g., by writing a null DID document.</p></li>
</ol>
<h2 id="related-specifications">Related Specifications</h2>
<p>DIDs are the atomic unit of a new layer of decentralized identity infrastructure. This is a list of the other specifications in the DID family that are currently under development.</p>
<h3 id="dkms-decentralized-key-management-system">DKMS (Decentralized Key Management System)</h3>
<p>DIDs are only possible with public/private key cryptography; the ability to generate, write, and update a DID and DID document to a blockchain without any intermediary requires control of the associated private key. This key management cannot itself rely on centralized authorities or it would defeat the whole purpose. In short, <em>decentralized identity requires decentralized key management</em>.</p>
<p>The purpose of the DKMS (Decentralized Key Management System) specification is to specify and interoperable protocol for managing the lifecycle of private keys and other private metadata associated with a DID in a way that is interoperable across different blockchains, apps, and vendors. This spec is being developed under <a href="https://www.dhs.gov/science-and-technology/news/2017/07/20/news-release-dhs-st-awards-749k-evernym-decentralized-key">a grant from the Science &amp; Technology Directorate of the U.S. Department of Homeland Security</a> based on the requirements and best practices set forth in <a href="http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-130.pdf"><em>NIST Special Publication 800-130</em></a>, “A Framework for Designing Key Management Systems”.</p>
<h3 id="did-tls">DID TLS</h3>
<p>Today's TLS infrastructure uses <a href="https://en.wikipedia.org/wiki/X.509"><em>X.509 certs</em></a> based on traditional hierarchical PKI, where <a href="https://en.wikipedia.org/wiki/Certificate_authority"><em>certificate authorities</em></a> (CAs) follow standardized best practices in order to qualify as trust roots that will be recognized by browser vendors. DID TLS will decentralize this process by enabling the standard X.509 cert elements required to establish a TLS session to be generated dynamically from any DID and DID document that conforms to the DID spec.</p>
<p>The DID TLS specification will enable encrypted, peer-to-peer connections to be negotiated in real time between any two DID-identified entities (people, organizations, things). This will radically expand the protections of the TLS protocol and could potentially turn them into the default for all nearly all forms of Internet communication.</p>
<h3 id="did-names">DID Names</h3>
<p>The DID specification is intentionally limited to machine-generated decentralized identifiers that are completely lacking in human memorability or usability. However there are many use cases it is desirable to be able to discover a DID using a human-friendly semantic name. Such a naming service would look like a flat, cryptographically-verifiable version of DNS.</p>
<p>The big difference, of course, is that a DID naming service needs to be fully decentralized, i.e., not depend on centralized registries and registrars. Registration of DID names would be made directly by identity owners to the blockchain itself using the same cryptographic verification as DID transactions.</p>
<p>The goal of the DID Names specification is to standardize how an interoperable decentralized naming layer can operate directly on top of the DID layer. A DID name is mapped to a DID the same way a DID is mapped to a DID document. DID names will be an optional feature of a DID method, so the governance and economics of a DID namespace can be specified by the same community that defines the associated DID method.</p>
<h3 id="did-auth">DID Auth</h3>
<p>A common goal of all blockchain identity systems is the cryptographic authentication of an identity owner. The various protocols all use some type of cryptographic challenge/response similar to the <a href="https://en.wikipedia.org/wiki/SQRL"><em>SQRL protocol</em></a> originally proposed by Steve Gibson and the <a href="https://en.wikipedia.org/wiki/Web_Authentication_Working_Group"><em>Web Authentication</em></a> protocol currently being standardized by W3C. In these protocols, a one-time challenge is issued by the relying party, signed by the identity owner's private key, and then verified by the relying party using the identity owner’s public key. Whereas SQRL and Web Authentication use pairwise public keys that cannot be externally verified, DIDs will enable verification of the public key against the blockchain identified by the DID method.</p>
<p>The DID Auth specification will standardize this cryptographic challenge/response authentication protocol so it can be used with any DID that supports it. DID Auth endpoints would then become one of the standard DID identity services than can be discovered via a DID document.</p>
<h2 id="dids-and-privacy-by-design">DIDs and Privacy by Design</h2>
<p>Privacy is an essential component of any identity management solution; it is especially critical for a global identity system that uses immutable public blockchains. Thankfully DID architecture can incorporate <a href="https://en.wikipedia.org/wiki/Privacy_by_design"><em>Privacy by Design</em></a> at the very lowest levels of infrastructure and thus become a powerful, new, privacy-preserving technology if deployed using best practices such as:</p>
<ol>
<li><p><strong>Pairwise-pseudonymous DIDs.</strong> While DIDs can be used as well-known public identifiers, they can also be used as private identifiers issued on a per-relationship basis. So rather than a person having a single DID, like a cell phone number or national ID number, she can have thousands of pairwise-unique DIDs that cannot be correlated without her consent, yet can still be managed as easily as an address book.</p></li>
<li><p><strong>Off-chain private data.</strong> Storing any type of PII on a public blockchain, even encrypted or hashed, is dangerous for two reasons: 1) the encrypted or hashed data is a global correlation point when the data is shared with multiple parties, and 2) if the encryption is eventually broken (e.g., <a href="https://en.wikipedia.org/wiki/Quantum_computing"><em>quantum computing</em></a>), the data will be forever accessible on an immutable public ledger. So the best practice is to store all private data off-chain and exchange it only over encrypted, private, peer-to-peer connections.</p></li>
<li><p><strong>Selective disclosure.</strong> The decentralized PKI (DPKI) that DIDs make possible opens the door to individuals gaining greater control over their personal data in two ways. First, it enables it to be shared using encrypted digital credentials (see below). Second, these credentials can use <a href="https://en.wikipedia.org/wiki/Zero-knowledge_proof"><em>zero-knowledge proof cryptography</em></a> for <a href="https://www.forbes.com/sites/bernardmarr/2016/03/16/why-data-minimization-is-an-important-concept-in-the-age-of-big-data/"><em>data minimization</em></a>, e.g., you can disclose that you are over a certain age without disclosing your exact birthdate.</p></li>
</ol>
<h2 id="dids-and-verifiable-claims">DIDs and Verifiable Claims</h2>
<p>DIDs are only the base layer of decentralized identity infrastructure. The next higher layer -- where most of the value is unlocked -- is <strong>verifiable claims</strong>. This is the technical term for a digitally signed electronic credential that conforms to the interoperability standards being developed by the <a href="https://www.w3.org/2017/vc/charter.html"><em>W3C Verifiable Claims Working Group</em></a>. For a complete introduction, please see the <a href="https://github.com/WebOfTrustInfo/rebooting-the-web-of-trust-fall2017/blob/master/topics-and-advance-readings/verifiable-claims-primer.md"><em>Verifiable Claims Primer</em></a>.</p>
<p>The diagram below (from Manu Sporny) illustrates the three primary roles in the verifiable claims ecosystem: <strong>issuers</strong> sign claims and give them to <strong>holders</strong> (identity owners) who present them to <strong>verifiers</strong> who verify the signatures in order to grant access to resources.</p>
<p><img src="../supporting-files/paper-images/did-primer-3.png" /></p>
<p>Note that in all three cases, the parties interact with the DID layer to register DIDs as persistent identifiers for issuers or holders, and to resolve those DIDs to obtain the public keys needed to verify the signature of an issuer or holder. Since any issuer may provide claims to any holder who may present them to any verifier, this results in set of rich, interlocking trust relationships that do not need to conform to any pre-established hierarchy -- a <strong>web of trust</strong>.</p>
<h2 id="appendix-a-did-community-resources">Appendix A: DID Community Resources</h2>
<p>Besides the links throughout this primer, these additional resources are available to anyone interested in joining the DID community.</p>
<ul>
<li><p><a href="https://www.w3.org/community/credentials/"><em>W3C Verifiable Claims Working Group mailing list</em></a></p></li>
<li><p><a href="https://w3c-ccg.github.io"><em>W3C Credentials Community Group</em></a></p></li>
<li><p><a href="https://github.com/w3c-ccg/did-spec/issues/"><em>DID specification issues list</em></a></p></li>
<li><p><a href="http://www.weboftrust.info/"><em>Rebooting the Web of Trust event</em></a> (held every six months)</p></li>
<li><p><a href="http://www.internetidentityworkshop.com/"><em>Internet Identity Workshop event</em></a> (held every six months)</p></li>
</ul>
